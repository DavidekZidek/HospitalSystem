@using System.Security.Claims
@{
ViewData["Title"] = "User Dashboard";
var userName = ViewBag.UserName ?? "Guest";
var email = ViewBag.Email ?? "Not Provided";
var phoneNumber = ViewBag.PhoneNumber ?? "Not Provided";
var userId = User.FindFirstValue(System.Security.Claims.ClaimTypes.NameIdentifier);
}

<link rel="stylesheet" href="~/css/dashboard.css" />

<div class="dashboard-container">
    <!-- Boční navigační panel -->
    <aside class="sidebar">
        <div class="logo">
            <h3>Hospital System</h3>
        </div>
        <ul class="menu">
            <li><a href="/User/Dashboard/Index"><i class="bi bi-person"></i> Profile</a></li>
            <li><a href="/User/Dashboard/Appointments"><i class="bi bi-calendar-check"></i> Appointments</a></li>
            <li><a href="/User/Dashboard/Reports"><i class="bi bi-file-earmark-text"></i> Reports</a></li>
            <li><a href="/User/Dashboard/Settings"><i class="active"></i> Settings</a></li>
            <li><a href="/User/Dashboard/Logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
        </ul>

    </aside>

    <!-- Hlavní obsah -->
    <main class="main-content">
        <div class="profile">
            <h2>Welcome, @userName!</h2>
        </div>

        <!-- Úprava jednotlivých údajů -->
        <div class="edit-section">
            <!-- Změna přezdívky -->
            <div class="edit-item">
                <h3>Change Username</h3>
                <form asp-controller="Dashboard" asp-action="UpdateProfile" method="post">
                    <input type="hidden" name="userId" value="@userId" />
                    <label for="userName">New Username:</label>
                    <input type="text" name="userName" value="@userName" placeholder="Enter new username" required />
                    <button type="submit">Save Username</button>
                </form>
            </div>

            <!-- Změna e-mailu -->
            <div class="edit-item">
                <h3>Change Email</h3>
                <form asp-controller="Dashboard" asp-action="UpdateProfile" method="post">
                    <input type="hidden" name="userId" value="@userId" />
                    <label for="email">New Email:</label>
                    <input type="email" name="email" value="@email" placeholder="Enter new email" required />
                    <button type="submit">Save Email</button>
                </form>
            </div>

            <!-- Změna telefonního čísla -->
            <div class="edit-item">
                <h3>Change Phone Number</h3>
                <form asp-controller="Dashboard" asp-action="UpdateProfile" method="post">
                    <input type="hidden" name="userId" value="@userId" />
                    <label for="phoneNumber">New Phone Number:</label>
                    <input type="tel" name="phoneNumber" value="@phoneNumber" placeholder="Enter new phone number" required />
                    <button type="submit">Save Phone Number</button>
                </form>
            </div>

            <!-- Změna hesla -->
            <div class="edit-item">
                <h3>Change Password</h3>
                <form asp-controller="Dashboard" asp-action="ChangePassword" method="post">
                    <input type="hidden" name="userId" value="@userId" />
                    <label for="currentPassword">Current Password:</label>
                    <input type="password" name="currentPassword" placeholder="Enter current password" required />
                    <label for="newPassword">New Password:</label>
                    <input type="password" name="newPassword" placeholder="Enter new password" required />
                    <button type="submit">Change Password</button>
                </form>
            </div>
        </div>
    </main>
</div>
